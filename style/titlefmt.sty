%
% This is file "titlefmt.sty"
%
% Copyright (C) 2025 by Githubonline1396529 <yyg249942899@163.com>
%
% This work may be distributed and/or modified under the
% conditions of the LaTeX Project Public License, either version 1.3
% of this license or (at your option) any later version.
% The latest version of this license is in
%   https://www.latex-project.org/lppl.txt
% and version 1.3c or later is part of all distributions of LaTeX
% version 2008 or later.
%
\NeedsTeXFormat{LaTeX2e}
\ProvidesClass{style/titlefmt}[
2025/04/20 v1.0 The title format settings. Version 0.0.1.2.]

% Defines counters to estimate the expected lines of text of the title in both
% Chinese and English.
\newcounter{InputLineCn}
\newcounter{InputLineEn}

\renewcommand\Authands{, }
% For the Chinese title.
\NewDocumentCommand{\cntitle}{O{1} m}{
  % The expected lines of text of the Chinese title. Defaut is 1.
  \setcounter{InputLineCn}{#1}
  \renewcommand{\dlmudoctrans@tokens@cntitle}{#2}

  \makeatletter
  \newcommand{\cntitleinMAINBODY}{
    \vspace*{1ex}{}
    \begin{center}
      {\zihao{3}\bfseries #2}\\\vspace{6pt}
      {\@author}
    \end{center}{}
    \vspace*{1ex}{}
  }
  \makeatother
}

% For the English title.
\NewDocumentCommand{\entitle}{O{1} m}{
  % The expected lines of text of the English title. Defaut is 1.
  \setcounter{InputLineEn}{#1}
  \renewcommand{\dlmudoctrans@tokens@entitle}{#2}
}

\newcommand{\translator}[1]{\renewcommand{\dlmudoctrans@tokens@translator}{#1}}
\newcommand{\sdtID}[1]{\renewcommand{\dlmudoctrans@tokens@sdtID}{#1}}
\newcommand{\major}[1]{\renewcommand{\dlmudoctrans@tokens@major}{#1}}

\newcommand{\pesudohookOFpremainbody}{
  \AddToHook{cmd/section/before}[keep_preskip_of_sectitle]{\vspace*{0pt}}
  \cntitleinMAINBODY
  \pagestyle{fancy} % 
  \fancyhead[C]{\zihao{-5}\dlmudoctrans@tokens@cntitle}
  \pagenumbering{arabic}
}


